###############################################################################
#
# IAR ANSI C/C++ Compiler V8.50.9.278/W32 for ARM         30/Sep/2021  10:19:31
# Copyright 1999-2020 IAR Systems AB.
#
#    Cpu mode                        
#    Endian                       =  little
#    Source file                  =
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\main.c
#    Command line                 =
#        -f C:\Users\casari\AppData\Local\Temp\1\EWC74F.tmp
#        (C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\main.c -D iar
#        -D AM_PART_APOLLO3 -D AM_PACKAGE_BGA -D AM_FREERTOS -D AM_DEBUG_PRINTF
#        -D AM_UTIL_FAULTISR_PRINT -lcN
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\bin
#        --diag_suppress Pa050 -o
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\bin
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 --no_path_in_file_macros -e --fpu=VFPv4_sp
#        --dlib_config "C:\Program Files (x86)\IAR Systems\Embedded Workbench
#        8.4\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\Tools\Ambiq\AmbiqSuite-R2.5.1\third_party\FreeRTOSv10.1.1\Source\include\\
#        -I C:\Tools\Ambiq\AmbiqSuite-R2.5.1\CMSIS\AmbiqMicro\Include\\ -I
#        C:\Tools\Ambiq\AmbiqSuite-R2.5.1\third_party\FreeRTOSv10.1.1\Source\portable\IAR\AMapollo2\\
#        -I C:\Tools\Ambiq\AmbiqSuite-R2.5.1\\ -I
#        C:\Tools\Ambiq\AmbiqSuite-R2.5.1\devices\\ -I
#        C:\Tools\Ambiq\AmbiqSuite-R2.5.1\utils\\ -I
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\..\src\\
#        -I
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\..\src\RTOS\\
#        -I
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\..\src\artemis\\
#        -I
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\..\src\bsp\\
#        -I C:\Tools\Ambiq\AmbiqSuite-R2.5.1\mcu\apollo3\\ -I
#        C:\Tools\Ambiq\AmbiqSuite-R2.5.1\CMSIS\ARM\Include\\ -I
#        $PROJ_DIR\src\RTOS\\ -I
#        C:\Tools\Ambiq\AmbiqSuite-R2.5.1\mcu\apollo3\hal\\ -Ol)
#    Locale                       =  C
#    List file                    =
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\bin\main.lst
#    Object file                  =
#        C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\iar\bin\main.o
#    Runtime model:                  
#      __SystemLibrary            =  DLib
#      __dlib_file_descriptor     =  0
#      __dlib_full_locale_support =  0
#      __dlib_version             =  6
#      __iar_require _Printf      =  floats,int_specials,widths
#
###############################################################################

C:\version-control\EDD-LCP_Control\Firmware\LCP_Control\main.c
      1          ///
      2          /// @file artemis_main.c
      3          ///
      4          
      5          #include "main.h"
      6          #include "S9_temp.h"
      7          #include "bsp_uart.h"
      8          
      9          #include "artemis_debug.h"
     10          #include "artemis_mcu.h"
     11          //#include "artemis_scheduler.h"
     12          //#include "artemis_time.h"
     13          //#include "artemis_pa9ld.h"
     14          //#include "artemis_ublox_i2c.h"
     15          #include "ublox.h"
     16          
     17          #include <stdlib.h>
     18          
     19          ///
     20          ///
     21          ///
     22          int main(void)
     23          {
     24              // initialize mcu features
     25              artemis_mcu_initialize();
     26          
     27              // initialize debug features
     28              artemis_debug_initialize();
     29          
     30              // initialize time functions
     31              artemis_time_initialize();
     32          
     33              // initialize the scheduler
     34          //    artemis_scheduler_initialize();
     35          
     36              // run the application
     37          //    artemis_scheduler_run();
     38          
     39              S9T_init(BSP_UART_COM1, &g_AM_BSP_GPIO_COM1_POWER_PIN, AM_BSP_GPIO_COM1_POWER_PIN);
     40              S9T_enable();
     41              
     42              /** Init GPS */
     43          
     44              UBLOX_initialize(UBLOX_COM_I2C, UBLOX_MSG_UBX, UBLOX_MSG_UBX, 1);
     45          
     46            float p, r, t;
     47            UBLOX_Nav_t gps = {0};
     48              
     49          //    ublox_data_t gps;
     50              while(true)
     51              {
     52                UBLOX_read_nav(&gps);
     53                printf("GPS Fix = %u\n", gps.fix);
     54                
     55                if(gps.fix)
     56                {
     57                  printf("Lat=%.7f, Lon=%.7f, Alt=%.3f\n", gps.position.lat, gps.position.lon, gps.position.alt);
     58                }
     59          //      artemis_pa9ld_read(&p, &t);
     60          //      printf("p=%0.3f, t=%0.3f\n", p, t);
     61          //      S9T_Read(&t, &r);
     62          //      printf("t=%.3f, r=%.3f\n", t, r); 
     63          //      artemis_ublox_i2c_read_position(&gps);
     64          //      artemis_ublox_read_data(&gps);
     65          //      artemis_ublox_test();
     66          //    artemis_ublox_read_register(0x00, 240);
     67          
     68          //      printf("lat=%.6f%c, lon=%.6f%c, alt=%.3f\n", gps.lat, gps.NS, gps.lon, gps.EW, gps.alt);
     69          //      bsp_uart_putc(BSP_UART_COM0, 'C');
     70          //      printf("%c", bsp_uart_getc(BSP_UART_COM0));
     71          //      am_hal_systick_delay_us(500000);
     72              }
     73              return(EXIT_SUCCESS);
     74          }

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      56   main
        56   -> S9T_enable
        56   -> S9T_init
        56   -> UBLOX_initialize
        56   -> UBLOX_read_nav
        56   -> __aeabi_f2d
        56   -> __aeabi_memclr4
        56   -> artemis_debug_initialize
        56   -> artemis_mcu_initialize
        56   -> artemis_time_initialize
        56   -> printf


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      16  ?_0
      32  ?_1
      36  ?_2
     124  main

 
  84 bytes in section .rodata
 124 bytes in section .text
 
 124 bytes of CODE  memory
  84 bytes of CONST memory

Errors: none
Warnings: 5
